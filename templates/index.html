<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoice Data Extractor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            padding: 30px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 700px;
            margin: auto;
        }
        .json-output {
            background-color: #212529;
            color: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-word;
        }
    </style>
</head>
<body>
<div class="container">
    <h2 class="mb-2 text-center">ðŸ“„ Invoice Data Extractor</h2>
    <p class="text-center text-muted mb-4">(Supports PDF, JPG, PNG, and WEBP formats)</p>

    {% if error_message %}
        <div class="alert alert-danger">{{ error_message }}</div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="file" class="form-label">Upload Invoice (PDF/Image)</label>
            <input class="form-control" type="file" name="file" id="file" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Extraction Method</label><br>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="method" value="normal" id="normal">
                <label class="form-check-label" for="normal">Normal OCR</label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="method" value="groq" id="groq">
                <label class="form-check-label" for="groq">Groq OCR</label>
            </div>
        </div>

        <button class="btn btn-primary" type="submit">Extract</button>
    </form>

    {% if extracted_data %}
        <hr>
        <h5 class="mt-4">ðŸ“¤ Extracted Data</h5>
        <div class="json-output">
            <code>{{ extracted_data | tojson(indent=2) }}</code>
        </div>

        <div class="mt-3">
            <a href="/download_csv" class="btn btn-success me-2">Download as CSV</a>
            <a href="/download_excel" class="btn btn-warning">Download as Excel</a>
        </div>
    {% endif %}
</div>
</body>
</html>
